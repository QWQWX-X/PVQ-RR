<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<title>PVQ-RR zonder titels/nummering - met Scoring & CSV</title>
<style>
 body { font-family: Arial, sans-serif; margin: 40px; max-width: 900px; }
 .vraagblok { margin-bottom: 20px; }
 .antwoordvakken { margin-top: 6px; }
 label.likert-label { margin-right: 15px; }
 .resultaat { background:#f6f6f6; padding:15px; margin-top:25px; border:1px solid #ccc; }
 .csv-knop { display:block; margin:22px 0 0 0; background:#44c; color:white; border:none; padding:9px 16px; border-radius:5px; font-size:1em; cursor:pointer; }
 .meta-invoer { margin-bottom: 18px; }
</style>
<script>
function likert(name) {
  let html = '';
  for (let i=1; i<=6; i++) {
    html += '<label class="likert-label"><input type="radio" name="'+name+'" value="'+i+'" required>'+i+'</label>';
  }
  return html;
}
const scoringMap = {
"Self-direction Thought": [1,23,39],
"Self-direction Action": [16,30,56],
"Stimulation": [10,28,43],
"Hedonism": [3,36,46],
"Achievement": [17,32,48],
"Power Dominance": [6,29,41],
"Power Resources": [12,20,44],
"Face": [9,24,49],
"Security Societal": [2,35,50],
"Security Personal": [13,26,53],
"Tradition": [18,33,40],
"Conformity-Rules": [15,31,42],
"Conformity-Interpersonal": [4,22,51],
"Humility": [7,38,54],
"Benevolence-Dependability": [19,27,55],
"Benevolence-Care": [11,25,47],
"Universalism-Concern": [5,37,52],
"Universalism-Nature": [8,21,45],
"Universalism-Tolerance": [14,34,57]
};
const higherOrderMap = {
"Self-Transcendence": ["Universalism-Nature","Universalism-Concern","Universalism-Tolerance","Benevolence-Care","Benevolence-Dependability"],
"Self-Enhancement": ["Achievement","Power Dominance","Power Resources"],
"Openness to Change": ["Self-direction Thought","Self-direction Action","Stimulation","Hedonism"],
"Conservation": ["Security Personal","Security Societal","Tradition","Conformity-Rules","Conformity-Interpersonal"]
};
let laatsteCSV = null;
function berekenUitslag(e) {
  e.preventDefault();
  let respondentID = document.getElementById('respondentid').value.trim();
  let invultijdstip = new Date().toISOString();
  let antwoorden = {};
  for(let i=1;i<=57;i++) {
    let v = document.querySelector('input[name="q'+i+'"]:checked');
    antwoorden['q'+i] = v ? v.value : '';
  }
  let waardenResultaten = {};
  for (let key in scoringMap) {
    let items = scoringMap[key];
    let som = 0, aantal = 0;
    items.forEach(nr=>{
      let val = antwoorden['q'+nr];
      if(val) { som += parseInt(val); aantal++; }
    });
    waardenResultaten[key] = (aantal>0) ? (som/aantal).toFixed(2) : "NA";
  }
  let hogereResultaten = {};
  for (let hokey in higherOrderMap) {
    let som = 0, aantal = 0;
    higherOrderMap[hokey].forEach(subval=>{
      if(waardenResultaten[subval]!=="NA") {
        som += parseFloat(waardenResultaten[subval]);
        aantal++;
      }
    });
    hogereResultaten[hokey] = (aantal>0) ? (som/aantal).toFixed(2) : "NA";
  }
  let out = '<div class="resultaat"><h3>Resultaten per Waarde</h3><ul>';
  for (let key in waardenResultaten) out += '<li><strong>'+key+':</strong> '+waardenResultaten[key]+'</li>';
  out += '</ul><h3>Hogere-Orde Waarden</h3><ul>';
  for (let key in hogereResultaten) out += '<li><strong>'+key+':</strong> '+hogereResultaten[key]+'</li>';
  out += '</ul></div>';
  let csvrows = [];
  let metaHeader = ['RespondentID','Invultijdstip'];
  let vraagHeader = [];
  for(let i=1;i<=57;i++) vraagHeader.push('q'+i);
  let waardenHeader = Object.keys(waardenResultaten);
  let hogereHeader = Object.keys(hogereResultaten);
  csvrows.push([ ...metaHeader, ...vraagHeader, ...waardenHeader, ...hogereHeader ].join(';'));
  let vraagAnswers = [];
  for(let i=1;i<=57;i++) vraagAnswers.push(antwoorden['q'+i]);
  let waardeAnswers = waardenHeader.map(k=>waardenResultaten[k]);
  let hogereAnswers = hogereHeader.map(k=>hogereResultaten[k]);
  csvrows.push([ respondentID, invultijdstip, ...vraagAnswers, ...waardeAnswers, ...hogereAnswers ].join(';'));
  laatsteCSV = csvrows.join('\r\n');
  out += '<button class="csv-knop" onclick="downloadCSV()">Download als CSV</button>';
  document.getElementById("uitslag").innerHTML = out;
}
function downloadCSV() {
  if(!laatsteCSV) return;
  let blob = new Blob([laatsteCSV], {type:'text/csv'});
  let link = document.createElement('a');
  link.href = window.URL.createObjectURL(blob);
  link.download = 'PVQ-RR-resultaat.csv';
  document.body.appendChild(link);
  link.click();
  setTimeout(()=>document.body.removeChild(link),500);
}
</script>
</head>
<body>
<h1>Vragenlijst</h1>
<form onsubmit="berekenUitslag(event)">
<div class="meta-invoer">
<label for="respondentid"><b>Respondent ID:</b></label>
<input type="text" id="respondentid" name="respondentid" required>
</div>
<div class="instructions" style="margin-top:10px; margin-bottom:20px;">
  <strong>Instructies:</strong><br>
  Hieronder beschrijven we kort verschillende personen. Lees elke beschrijving en denk na over hoeveel deze persoon wel of niet op jou lijkt. 
  Klik het vakje aan dat aangeeft in welke mate de beschreven persoon op jou lijkt.<br>
  <br>
  1 = Lijkt helemaal niet op mij<br>
  2 = Lijkt niet op mij<br>
  3 = Lijkt een beetje op mij<br>
  4 = Lijkt enigszins op mij<br>
  5 = Lijkt op mij<br>
  6 = Lijkt heel erg op mij
</div>

<!-- Alle 57 vragen in volgorde, zonder titels/nummering -->
<div class="vraagblok">Het is belangrijk voor hem/haar om zijn/haar standpunten onafhankelijk te vormen.<br><div class="antwoordvakken"><script>document.write(likert("q1"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar dat zijn/haar land veilig en stabiel is.<br><div class="antwoordvakken"><script>document.write(likert("q2"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar om plezier te hebben.<br><div class="antwoordvakken"><script>document.write(likert("q3"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar om te voorkomen dat anderen overstuur raken.<br><div class="antwoordvakken"><script>document.write(likert("q4"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar dat zwakken in de samenleving beschermd worden.<br><div class="antwoordvakken"><script>document.write(likert("q5"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar dat mensen doen wat hij/zij zegt.<br><div class="antwoordvakken"><script>document.write(likert("q6"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar om nooit te denken dat hij/zij meer verdient dan anderen.<br><div class="antwoordvakken"><script>document.write(likert("q7"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar om voor de natuur te zorgen.<br><div class="antwoordvakken"><script>document.write(likert("q8"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar dat niemand hem/haar ooit zou beschamen.<br><div class="antwoordvakken"><script>document.write(likert("q9"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar om altijd op zoek te gaan naar verschillende dingen om te doen.<br><div class="antwoordvakken"><script>document.write(likert("q10"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar om te zorgen voor mensen die dichtbij staan.<br><div class="antwoordvakken"><script>document.write(likert("q11"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar om de macht te hebben die geld kan brengen.<br><div class="antwoordvakken"><script>document.write(likert("q12"))</script></div></div>
<div class="vraagblok">Het is zeer belangrijk voor hem/haar om ziekte te vermijden en zijn/haar gezondheid te beschermen.<br><div class="antwoordvakken"><script>document.write(likert("q13"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar om tolerant te zijn tegenover allerlei mensen en groepen.<br><div class="antwoordvakken"><script>document.write(likert("q14"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar om nooit regels of voorschriften te overtreden.<br><div class="antwoordvakken"><script>document.write(likert("q15"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar om zelf beslissingen te maken over zijn/haar leven.<br><div class="antwoordvakken"><script>document.write(likert("q16"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar om ambitie te hebben in het leven.<br><div class="antwoordvakken"><script>document.write(likert("q17"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar om traditionele waarden en denkwijzen te behouden.<br><div class="antwoordvakken"><script>document.write(likert("q18"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar dat mensen die hij/zij kent volledig vertrouwen hebben in hem/haar.<br><div class="antwoordvakken"><script>document.write(likert("q19"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar om rijk te zijn.<br><div class="antwoordvakken"><script>document.write(likert("q20"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar om zich in te zetten voor de bescherming van de natuur.<br><div class="antwoordvakken"><script>document.write(likert("q21"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar om nooit iemand te ergeren.<br><div class="antwoordvakken"><script>document.write(likert("q22"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar om eigen meningen te ontwikkelen.<br><div class="antwoordvakken"><script>document.write(likert("q23"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar om zijn/haar publieke imago te beschermen.<br><div class="antwoordvakken"><script>document.write(likert("q24"))</script></div></div>
<div class="vraagblok">Het is zeer belangrijk voor hem/haar om mensen die hem/haar dierbaar zijn te helpen.<br><div class="antwoordvakken"><script>document.write(likert("q25"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar om persoonlijk veilig en gezond te zijn.<br><div class="antwoordvakken"><script>document.write(likert("q26"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar om een betrouwbare en trouwe vriend te zijn.<br><div class="antwoordvakken"><script>document.write(likert("q27"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar om risico's te nemen die het leven spannend maken.<br><div class="antwoordvakken"><script>document.write(likert("q28"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar om de macht te hebben om mensen te laten doen wat hij/zij wil.<br><div class="antwoordvakken"><script>document.write(likert("q29"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar om zijn/haar activiteiten zelfstandig te plannen.<br><div class="antwoordvakken"><script>document.write(likert("q30"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar om regels te volgen, zelfs als niemand het ziet.<br><div class="antwoordvakken"><script>document.write(likert("q31"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar om zeer succesvol te zijn.<br><div class="antwoordvakken"><script>document.write(likert("q32"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar om de gewoonten van zijn/haar familie of religie te volgen.<br><div class="antwoordvakken"><script>document.write(likert("q33"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar om te luisteren naar en begrijpen van mensen die anders zijn dan hij/zij.<br><div class="antwoordvakken"><script>document.write(likert("q34"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar dat de staat sterk is en zijn burgers kan verdedigen.<br><div class="antwoordvakken"><script>document.write(likert("q35"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar om te genieten van de geneugten van het leven.<br><div class="antwoordvakken"><script>document.write(likert("q36"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar dat iedereen in de wereld gelijke kansen krijgt.<br><div class="antwoordvakken"><script>document.write(likert("q37"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar om bescheiden te zijn.<br><div class="antwoordvakken"><script>document.write(likert("q38"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar om dingen zelf uit te zoeken.<br><div class="antwoordvakken"><script>document.write(likert("q39"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar om de traditionele gebruiken van zijn/haar cultuur te eren.<br><div class="antwoordvakken"><script>document.write(likert("q40"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar om degene te zijn die anderen vertelt wat ze moeten doen.<br><div class="antwoordvakken"><script>document.write(likert("q41"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar om alle wetten na te leven.<br><div class="antwoordvakken"><script>document.write(likert("q42"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar om nieuwe ervaringen op te doen.<br><div class="antwoordvakken"><script>document.write(likert("q43"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar om dure bezittingen te hebben die zijn/haar rijkdom tonen.<br><div class="antwoordvakken"><script>document.write(likert("q44"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar om het milieu te beschermen tegen vernietiging en vervuiling.<br><div class="antwoordvakken"><script>document.write(likert("q45"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar om van elke gelegenheid gebruik te maken om plezier te maken.<br><div class="antwoordvakken"><script>document.write(likert("q46"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar om betrokken te zijn bij elke behoefte van geliefden.<br><div class="antwoordvakken"><script>document.write(likert("q47"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar dat mensen erkennen wat hij/zij heeft bereikt.<br><div class="antwoordvakken"><script>document.write(likert("q48"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar om nooit vernederd te worden.<br><div class="antwoordvakken"><script>document.write(likert("q49"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar dat zijn/haar land zichzelf beschermt tegen bedreigingen.<br><div class="antwoordvakken"><script>document.write(likert("q50"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar om nooit andere mensen boos te maken.<br><div class="antwoordvakken"><script>document.write(likert("q51"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar dat iedereen rechtvaardig wordt behandeld, ook onbekenden.<br><div class="antwoordvakken"><script>document.write(likert("q52"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar om alles wat gevaarlijk is te vermijden.<br><div class="antwoordvakken"><script>document.write(likert("q53"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar om tevreden te zijn met wat hij/zij heeft en niet om meer te vragen.<br><div class="antwoordvakken"><script>document.write(likert("q54"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar dat familie en vrienden altijd volledig op hem/haar kunnen rekenen.<br><div class="antwoordvakken"><script>document.write(likert("q55"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar om zelf te bepalen wat hij/zij doet.<br><div class="antwoordvakken"><script>document.write(likert("q56"))</script></div></div>
<div class="vraagblok">Het is belangrijk voor hem/haar om mensen te accepteren, zelfs als hij/zij het niet met hen eens is.<br><div class="antwoordvakken"><script>document.write(likert("q57"))</script></div></div>

<input type="submit" value="Bereken scores">
</form>
<div id="uitslag"></div>
<form action="https://formsubmit.co/nilsrobert@live.be" method="POST">
    <button type="submit">Verstuur</button>
</form>
</body>
</html>



