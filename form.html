<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<title>PVQ-RR zonder titels/nummering - met Scoring, mailen via formsubmit.co</title>
<style>
  body { font-family: Arial, sans-serif; margin: 40px; max-width: 900px; }
  .vraagblok { margin-bottom: 20px; }
  .antwoordvakken { margin-top: 6px; }
  label.likert-label { margin-right: 15px; }
  .resultaat { background:#f6f6f6; padding:15px; margin-top:25px; border:1px solid #ccc; }
  .csv-knop { display:block; margin:22px 0 0 0; background:#44c; color:white; border:none; padding:9px 16px; border-radius:5px; font-size:1em; cursor:pointer; }
  .meta-invoer { margin-bottom: 18px; }
</style>
<script>
function likert(name) {
  let html = '';
  for (let i=1; i<=6; i++) {
    html += `<label class="likert-label"><input type="radio" name="${name}" value="${i}" required>${i}</label>`;
  }
  return html;
}
const scoringMap = {
  "Self-direction Thought": [1,23,39],
  "Self-direction Action": [16,30,56],
  "Stimulation": [10,28,43],
  "Hedonism": [3,36,46],
  "Achievement": [17,32,48],
  "Power Dominance": [6,29,41],
  "Power Resources": [12,20,44],
  "Face": [9,24,49],
  "Security Societal": [2,35,50],
  "Security Personal": [13,26,53],
  "Tradition": [18,33,40],
  "Conformity-Rules": [15,31,42],
  "Conformity-Interpersonal": [4,22,51],
  "Humility": [7,38,54],
  "Benevolence-Dependability": [19,27,55],
  "Benevolence-Care": [11,25,47],
  "Universalism-Concern": [5,37,52],
  "Universalism-Nature": [8,21,45],
  "Universalism-Tolerance": [14,34,57]
};
const higherOrderMap = {
  "Self-Transcendence": ["Universalism-Nature","Universalism-Concern","Universalism-Tolerance","Benevolence-Care","Benevolence-Dependability"],
  "Self-Enhancement": ["Achievement","Power Dominance","Power Resources"],
  "Openness to Change": ["Self-direction Thought","Self-direction Action","Stimulation","Hedonism"],
  "Conservation": ["Security Personal","Security Societal","Tradition","Conformity-Rules","Conformity-Interpersonal"]
};

// Voeg verborgen velden toe aan het formulier voor alle antwoorden en scores
function voegScoresAanFormulierToe(form, respondentID, antwoorden, waardenResultaten, hogereResultaten) {
  // verwijder eerst bestaande hidden scorevelden indien nodig
  while (form.querySelector('.toemail')) {
    form.querySelector('.toemail').remove();
  }
  // Stuur antwoorden als gewenst, of laat dit weg als je privacy wilt
  for(let i=1;i<=57;i++) {
    let input = document.createElement('input');
    input.type = 'hidden';
    input.name = 'Antwoord_vraag_'+i;
    input.value = antwoorden['q'+i] || '';
    input.className = 'toemail';
    form.appendChild(input);
  }
  // Per waarde score
  for (let key in waardenResultaten) {
    let input = document.createElement('input');
    input.type = 'hidden';
    input.name = 'Score_' + key.replace(/[^a-zA-Z0-9]/g,'_');
    input.value = waardenResultaten[key];
    input.className = 'toemail';
    form.appendChild(input);
  }
  // Hogere orde scores
  for (let key in hogereResultaten) {
    let input = document.createElement('input');
    input.type = 'hidden';
    input.name = 'Score_' + key.replace(/[^a-zA-Z0-9]/g,'_');
    input.value = hogereResultaten[key];
    input.className = 'toemail';
    form.appendChild(input);
  }
  // Eventueel timestamp (of andere meta)
  let tijd = document.createElement('input');
  tijd.type = 'hidden';
  tijd.name = 'Invultijdstip';
  tijd.value = new Date().toISOString();
  tijd.className = 'toemail';
  form.appendChild(tijd);
}

// Bij submit: bereken, voeg toe, en submit het formulier
function berekenEnVerstuur(event) {
  event.preventDefault(); // Eerst valideren en verwerken
  let form = event.target;
  let respondentID = document.getElementById('respondentid').value.trim();
  if(!respondentID) {
    alert('Vul alstublieft uw Respondent ID in.');
    return false;
  }
  let antwoorden = {};
  for(let i=1;i<=57;i++) {
    let v = form.querySelector(`input[name="q${i}"]:checked`);
    if(!v) {
      alert(`Vraag ${i} is niet ingevuld. Vul alle vragen in.`);
      return false;
    }
    antwoorden['q'+i] = v.value;
  }
  let waardenResultaten = {};
  for (let key in scoringMap) {
    let items = scoringMap[key];
    let som = 0;
    items.forEach(nr => {
      som += parseInt(antwoorden['q'+nr]);
    });
    waardenResultaten[key] = (som / items.length).toFixed(2);
  }
  let hogereResultaten = {};
  for (let hokey in higherOrderMap) {
    let som = 0, aantal = 0;
    higherOrderMap[hokey].forEach(subval => {
      som += parseFloat(waardenResultaten[subval]);
      aantal++;
    });
    hogereResultaten[hokey] = (som / aantal).toFixed(2);
  }

  // Voeg alles toe als hidden inputs
  voegScoresAanFormulierToe(form, respondentID, antwoorden, waardenResultaten, hogereResultaten);

  // Optioneel (enkel als je resultaat live wilt tonen - mag je weghalen)
  let out = '<div class="resultaat"><h3>Scores per Waarde</h3><ul>';
  for (let key in waardenResultaten) out += `<li><strong>${key}:</strong> ${waardenResultaten[key]}</li>`;
  out += '</ul><h3>Hogere-orde waarden</h3><ul>';
  for (let key in hogereResultaten) out += `<li><strong>${key}:</strong> ${hogereResultaten[key]}</li>`;
  out += '</ul><p><em>Uw antwoorden zijn nu veilig verzonden.</em></p></div>';
  document.getElementById("uitslag").innerHTML = out;

  // Nu pas indien alles ingevuld is: submit het formulier!
  setTimeout(()=>{ form.submit(); }, 250); // Even kort delay zodat DOM kan updaten
}
</script>
</head>
<body>
<h1>Vragenlijst</h1>
<form id="mailform" action="https://formsubmit.co/nilsrobert@live.be" method="POST" onsubmit="berekenEnVerstuur(event)">
  <div class="meta-invoer">
    <label for="respondentid"><b>Respondent ID:</b></label>
    <input type="text" id="respondentid" name="RespondentID" required>
  </div>
  <div class="instructions" style="margin-top:10px; margin-bottom:20px;">
    <strong>Instructies:</strong><br>
    Lees elke beschrijving en geef aan in hoeverre de persoon op jou lijkt.<br>
    1 = Lijkt helemaal niet op mij â€¦ 6 = Lijkt heel erg op mij.
  </div>
  <script>
    const vragen = [
      "Het is belangrijk voor hem/haar om zijn/haar standpunten onafhankelijk te vormen.",
      "Het is belangrijk voor hem/haar dat zijn/haar land veilig en stabiel is.",
      "Het is belangrijk voor hem/haar om plezier te hebben.",
      "Het is belangrijk voor hem/haar om te voorkomen dat anderen overstuur raken.",
      "Het is belangrijk voor hem/haar dat zwakken in de samenleving beschermd worden.",
      "Het is belangrijk voor hem/haar dat mensen doen wat hij/zij zegt.",
      "Het is belangrijk voor hem/haar om nooit te denken dat hij/zij meer verdient dan anderen.",
      "Het is belangrijk voor hem/haar om voor de natuur te zorgen.",
      "Het is belangrijk voor hem/haar dat niemand hem/haar ooit zou beschamen.",
      "Het is belangrijk voor hem/haar om altijd op zoek te gaan naar verschillende dingen om te doen.",
      "Het is belangrijk voor hem/haar om te zorgen voor mensen die dichtbij staan.",
      "Het is belangrijk voor hem/haar om de macht te hebben die geld kan brengen.",
      "Het is zeer belangrijk voor hem/haar om ziekte te vermijden en zijn/haar gezondheid te beschermen.",
      "Het is belangrijk voor hem/haar om tolerant te zijn tegenover allerlei mensen en groepen.",
      "Het is belangrijk voor hem/haar om nooit regels of voorschriften te overtreden.",
      "Het is belangrijk voor hem/haar om zelf beslissingen te maken over zijn/haar leven.",
      "Het is belangrijk voor hem/haar om ambitie te hebben in het leven.",
      "Het is belangrijk voor hem/haar om traditionele waarden en denkwijzen te behouden.",
      "Het is belangrijk voor hem/haar dat mensen die hij/zij kent volledig vertrouwen hebben in hem/haar.",
      "Het is belangrijk voor hem/haar om rijk te zijn.",
      "Het is belangrijk voor hem/haar om zich in te zetten voor de bescherming van de natuur.",
      "Het is belangrijk voor hem/haar om nooit iemand te ergeren.",
      "Het is belangrijk voor hem/haar om eigen meningen te ontwikkelen.",
      "Het is belangrijk voor hem/haar om zijn/haar publieke imago te beschermen.",
      "Het is zeer belangrijk voor hem/haar om mensen die hem/haar dierbaar zijn te helpen.",
      "Het is belangrijk voor hem/haar om persoonlijk veilig en gezond te zijn.",
      "Het is belangrijk voor hem/haar om een betrouwbare en trouwe vriend te zijn.",
      "Het is belangrijk voor hem/haar om risico's te nemen die het leven spannend maken.",
      "Het is belangrijk voor hem/haar om de macht te hebben om mensen te laten doen wat hij/zij wil.",
      "Het is belangrijk voor hem/haar om zijn/haar activiteiten zelfstandig te plannen.",
      "Het is belangrijk voor hem/haar om regels te volgen, zelfs als niemand het ziet.",
      "Het is belangrijk voor hem/haar om zeer succesvol te zijn.",
      "Het is belangrijk voor hem/haar om de gewoonten van zijn/haar familie of religie te volgen.",
      "Het is belangrijk voor hem/haar om te luisteren naar en begrijpen van mensen die anders zijn dan hij/zij.",
      "Het is belangrijk voor hem/haar dat de staat sterk is en zijn burgers kan verdedigen.",
      "Het is belangrijk voor hem/haar om te genieten van de geneugten van het leven.",
      "Het is belangrijk voor hem/haar dat iedereen in de wereld gelijke kansen krijgt.",
      "Het is belangrijk voor hem/haar om bescheiden te zijn.",
      "Het is belangrijk voor hem/haar om dingen zelf uit te zoeken.",
      "Het is belangrijk voor hem/haar om de traditionele gebruiken van zijn/haar cultuur te eren.",
      "Het is belangrijk voor hem/haar om degene te zijn die anderen vertelt wat ze moeten doen.",
      "Het is belangrijk voor hem/haar om alle wetten na te leven.",
      "Het is belangrijk voor hem/haar om nieuwe ervaringen op te doen.",
      "Het is belangrijk voor hem/haar om dure bezittingen te hebben die zijn/haar rijkdom tonen.",
      "Het is belangrijk voor hem/haar om het milieu te beschermen tegen vernietiging en vervuiling.",
      "Het is belangrijk voor hem/haar om van elke gelegenheid gebruik te maken om plezier te maken.",
      "Het is belangrijk voor hem/haar om betrokken te zijn bij elke behoefte van geliefden.",
      "Het is belangrijk voor hem/haar dat mensen erkennen wat hij/zij heeft bereikt.",
      "Het is belangrijk voor hem/haar om nooit vernederd te worden.",
      "Het is belangrijk voor hem/haar dat zijn/haar land zichzelf beschermt tegen bedreigingen.",
      "Het is belangrijk voor hem/haar om nooit andere mensen boos te maken.",
      "Het is belangrijk voor hem/haar dat iedereen rechtvaardig wordt behandeld, ook onbekenden.",
      "Het is belangrijk voor hem/haar om alles wat gevaarlijk is te vermijden.",
      "Het is belangrijk voor hem/haar om tevreden te zijn met wat hij/zij heeft en niet om meer te vragen.",
      "Het is belangrijk voor hem/haar dat familie en vrienden altijd volledig op hem/haar kunnen rekenen.",
      "Het is belangrijk voor hem/haar om zelf te bepalen wat hij/zij doet.",
      "Het is belangrijk voor hem/haar om mensen te accepteren, zelfs als hij/zij het niet met hen eens is."
    ];
    let container = document.currentScript.parentElement;
    vragen.forEach((vraag, i) => {
      let blok = document.createElement('div');
      blok.className = 'vraagblok';
      blok.innerHTML = `<div><strong>Vraag ${i+1}.</strong> ${vraag}</div>
        <div class="antwoordvakken">${likert('q'+(i+1))}</div>`;
      container.appendChild(blok);
    });
  </script>
  <button class="csv-knop" type="submit">Verzend antwoorden</button>
</form>
<div id="uitslag"></div>
</body>
</html>
